!function e(t){function n(){function e(e,t,r,o,u,i,l,f){if("boolean"==typeof e?(f=e,e=n.DEFAULT_TIME):"boolean"==typeof t?(f=t,t=n.DEFAULT_INTERVAL):"boolean"==typeof r?(f=r,r=n.DEFAULT_PLAYSTATE):"boolean"==typeof o?(f=o,o=n.DEFAULT_BOTTOM):"boolean"==typeof l&&(f=l,l=n.DEFAULT_SPEED),e<A.bottom||e>A.top)throw new TypeError("time lies outside of the available range of the timer");A.bottom="number"==typeof o?o:n.DEFAULT_BOTTOM,U.bottom=A.bottom,A.loop="boolean"==typeof i?i:n.DEFAULT_LOOP,U.loop=A.loop,A.speed="number"==typeof l?l:n.DEFAULT_SPEED,U.speed=A.speed,A.interval="number"==typeof t?t:n.DEFAULT_INTERVAL,U.interval=A.interval,A.time="number"==typeof e?e:n.DEFAULT_TIME,U.time=A.time,A.top="number"==typeof u?u:n.DEFAULT_TOP,U.top=A.top,k="number"==typeof r?r:n.DEFAULT_PLAYSTATE,U.state=k,I="boolean"==typeof f?f:n.DEFAULT_RAISES_EVENTS,A.state==n.PLAYING&&a()}function a(){L=A.time,j=Date.now(),k=n.PLAYING,S=U.speed,P(),D(new r("play",A,L))}function u(){L=A.time,j=Date.now(),k=n.STOPPED,d(),y(),D(new r("stop",A,L))}function i(){L=U.time,j=Date.now(),k=n.STOPPED,d(),y(),D(new r("stop",A,L)),D(new r("reset",A,L))}function l(){L=U.time,j=Date.now(),y(),D(new r("reset",A,L))}function f(){L=A.time,j=Date.now(),k=n.PLAYING,S=2*U.speed,P(),D(new r("play",A,L))}function c(){L=A.time,j=Date.now(),k=n.PLAYING,S=-1*U.speed,P(),D(new r("play",A,L))}function b(){L=A.time,j=Date.now(),k=n.PLAYING,S=-2*U.speed,P(),D(new r("play",A,L))}function p(e,t){var n=e;return n instanceof o||(n=new o(e,t)),_.push(n),_.length-1}function m(e){_[e]=null}function P(){null==h&&I&&(h=t.setInterval(y,n.PRECISION))}function d(){null!==h&&t.clearInterval(h),h=null}function y(){var e=A.time;D(new r("update",A));var t=T(e);s(e,t),E(e,t),F=e}function T(e){var t=!1,o=k;return e>=Y&&(t=!0,D(new r("top",A,Y)),N&&o?(L=M+(e-Y),j=Date.now(),D(new r("bottom",A,M))):o&&(e=Y,L=Y,j=Date.now(),k=n.STOPPED,d(),D(new r("stop",A,Y)))),M>=e&&!t&&(t=!0,D(new r("bottom",A,M)),N&&o?(L=Y-(M-e),j=Date.now(),D(new r("top",A,Y))):o&&(e=M,L=M,j=Date.now(),k=n.STOPPED,d(),D(new r("stop",A,M)))),t}function s(e){var t=F%V,n=A.time%V;if(S>0&&k>0){if(t>n){var o=e-e%V;D(new r("tick",A,o))}}else if(0>S&&k>0&&n>t){var o=e+e%V;D(new r("tick",A,o))}}function E(e,t){for(var n=0;n<_.length;n++){var o=_[n];if(S>0&&(k>0||t)&&o){if(F<o.time&&e>o.time||e==o.time){var a=new r("marker",o);o.callback&&o.callback(a),D(a)}}else if(0>S&&(k>0||t)&&o&&(F>o.time&&e<o.time||e==o.time)){var a=new r("marker",o);o.callback&&o.callback(a),D(a)}}}function O(e,t,n){e in Z||(Z[e]=[]),Z[e].push(t)}function v(e,t,n){if(e in Z)for(var r=Z[e],o=0;o<r.length;o++)if(r[o]===t)return void r.splice(o,1)}function D(e){if(!(e.type in Z))return!0;var t=Z[e.type];e.target=A,t.on&&t.on.call(A,e);for(var n=0;n<t.length;n++)t[n].call(A,e);return!e.defaultPrevented}const A=this;var L,j,w,h=null,_=[],F=0,I,U={},g={};Object.defineProperty(A,"bottom",{get:function(){return M},set:function(e){M="number"==typeof e?Math.toZero(e):n.DEFAULT_BOTTOM},enumerable:!0});var M=n.DEFAULT_BOTTOM;Object.defineProperty(A,"loop",{get:function(){return N},set:function(e){N=!!e},enumerable:!0});var N=null;Object.defineProperty(A,"speed",{get:function(){return S},set:function(e){L=Math.toZero(A.time),j=Date.now(),S=e?e:n.DEFAULT_SPEED},enumerable:!0});var S=n.DEFAULT_SPEED;Object.defineProperty(A,"state",{get:function(){return k},enumerable:!0});var k=0;Object.defineProperty(A,"top",{get:function(){return Y},set:function(e){Y=e?Math.toZero(e):n.DEFAULT_TOP},enumerable:!0});var Y=n.DEFAULT_TOP;Object.defineProperty(A,"interval",{get:function(){return V},set:function(e){V=e?Math.max(1,e):n.DEFAULT_INTERVAL},enumerable:!0});var V=n.DEFAULT_INTERVAL;Object.defineProperty(A,"ticks",{get:function(){return Math.toZero(A.time/V)},enumerable:!0}),Object.defineProperty(A,"time",{get:function(){var e=Math.toZero(L+(Date.now()-j)*(S*Math.min(k,1)));return e=Math.max(M,Math.min(Y,e)),isNaN(e)?U.time:e},set:function(e){if(M>e||e>Y)throw new TypeError("time lies outside of the available range of the timer");L=Math.toZero(e),j=Date.now(),y()},enumerable:!0}),A.play=a,A.pause=u,A.stop=i,A.reset=l,A.fastForward=f,A.playBackward=c,A.fastBackward=b,A.addMarker=p,A.removeMarker=m;var R=0,Z={bottom:[],marker:[],play:[],reset:[],stop:[],tick:[],top:[],update:[]};A.addEventListener=O,A.removeEventListener=v,A.dispatchEvent=D,Object.defineProperty(A,"onbottom",{get:function(){return Z.bottom.on},set:function(e){Z.bottom.on=e},enumerable:!0}),Object.defineProperty(A,"onmarker",{get:function(){return Z.marker.on},set:function(e){Z.marker.on=e},enumerable:!0}),Object.defineProperty(A,"onplay",{get:function(){return Z.play.on},set:function(e){Z.play.on=e},enumerable:!0}),Object.defineProperty(A,"onreset",{get:function(){return Z.reset.on},set:function(e){Z.reset.on=e},enumerable:!0}),Object.defineProperty(A,"onstop",{get:function(){return Z.stop.on},set:function(e){Z.stop.on=e},enumerable:!0}),Object.defineProperty(A,"ontick",{get:function(){return Z.tick.on},set:function(e){Z.tick.on=e},enumerable:!0}),Object.defineProperty(A,"ontop",{get:function(){return Z.top.on},set:function(e){Z.top.on=e},enumerable:!0}),Object.defineProperty(A,"onupdate",{get:function(){return Z.update.on},set:function(e){Z.update.on=e},enumerable:!0}),e.apply(A,arguments)}function r(e,t,n){const r=this;var n="number"==typeof n?n:t.time;Object.defineProperty(r,"bubbles",{value:!1,enumerable:!0}),Object.defineProperty(r,"cancelBubble",{value:!1,enumerable:!0}),Object.defineProperty(r,"cancelable",{value:!1,enumerable:!0}),Object.defineProperty(r,"composed",{value:!1,enumerable:!0}),Object.defineProperty(r,"currentTarget",{value:!1,enumerable:!0}),Object.defineProperty(r,"defaultPrevented",{value:!1,enumerable:!0}),Object.defineProperty(r,"eventPhase",{value:0,enumerable:!0}),Object.defineProperty(r,"isTrusted",{value:!0,enumerable:!0}),Object.defineProperty(r,"path",{value:[],enumerable:!0}),Object.defineProperty(r,"returnValue",{value:n,enumerable:!0}),Object.defineProperty(r,"srcElement",{value:t,enumerable:!0}),Object.defineProperty(r,"target",{value:t,enumerable:!0}),Object.defineProperty(r,"timeStamp",{value:Date.now(),enumerable:!0}),Object.defineProperty(r,"type",{value:e,enumerable:!0})}function o(e,t){const n=this;var r=e,o=t;Object.defineProperty(n,"time",{get:function(){return r},enumerable:!0}),Object.defineProperty(n,"callback",{get:function(){return o},enumerable:!0})}t.Timer=n,Object.defineProperty(n,"PRECISION",{value:1,enumerable:!0}),Object.defineProperty(n,"STOPPED",{value:0,enumerable:!0}),Object.defineProperty(n,"PLAYING",{value:1,enumerable:!0}),Object.defineProperty(n,"DEFAULT_TIME",{value:0,enumerable:!0}),Object.defineProperty(n,"DEFAULT_INTERVAL",{value:1e3,enumerable:!0}),Object.defineProperty(n,"DEFAULT_PLAYSTATE",{value:n.STOPPED,enumerable:!0}),Object.defineProperty(n,"DEFAULT_SPEED",{value:1,enumerable:!0}),Object.defineProperty(n,"DEFAULT_BOTTOM",{value:Number.NEGATIVE_INFINITY,enumerable:!0}),Object.defineProperty(n,"DEFAULT_TOP",{value:Number.POSITIVE_INFINITY,enumerable:!0}),Object.defineProperty(n,"DEFAULT_LOOP",{value:!1,enumerable:!0}),Object.defineProperty(n,"DEFAULT_RAISES_EVENTS",{value:!0,enumerable:!0}),t.TimerEvent=r,t.TimerMarker=o,function(){function e(e){return 0>e?Math.ceil(e):Math.floor(e)}"undefined"==typeof Math.toZero?Math.toZero=e:console.error("Math.toZero is already defined.")}()}(this);
